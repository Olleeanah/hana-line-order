<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>èŠ±ç”°èˆ é»é¤ç³»çµ±</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #fdfcf9;
      padding: 1rem;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .product {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border: 1px solid #eee;
      padding: 0.5rem;
      margin-bottom: 0.5rem;
      border-radius: 8px;
      background-color: #fff;
    }
    .name {
      flex: 1;
    }
    .counter {
      display: flex;
      align-items: center;
    }
    .counter button {
      width: 32px;
      height: 32px;
      border: none;
      background: #3b82f6;
      color: #fff;
      font-size: 1.2rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .counter span {
      display: inline-block;
      width: 32px;
      text-align: center;
    }
    .section-title {
      font-weight: bold;
      margin-top: 1.5rem;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.25rem;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    .summary {
      margin-top: 1rem;
      font-size: 1.1rem;
      font-weight: bold;
    }
    button.submit-btn {
      background: #f9a8d4;
      color: #000;
      font-weight: bold;
      padding: 1rem;
      width: 100%;
      border: none;
      border-radius: 8px;
      font-size: 1.2rem;
      cursor: pointer;
    }
    #resultBox {
      white-space: pre-wrap;
      background: #fff0f5;
      border: 1px solid #ccc;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ¸ èŠ±ç”°èˆ é»é¤ç³»çµ±</h1>

  <div class="section-title">â˜” ä»Šæ—¥è‡¨æ™‚å…¬å‘Š</div>
  <div style="background:#fff5f8; border:1px solid #f8c4d4; border-radius:8px; padding:1rem; line-height:1.8; color:#444;">
  6/13ï¼ˆäº”ï¼‰ä»Šå¤©åˆå¾Œé¢¨é›¨åŠ åŠ‡ â˜”èŠ±ç”°èˆæ±ºå®šè‡¨æ™‚åº—ä¼‘ä¸€å¤©ğŸ•Š<br>è«‹å¤§å®¶å‡ºé–€å¤šæ³¨æ„å®‰å…¨å–” 
  </div>

  <div class="section-title">ğŸ ç‡Ÿæ¥­æ™‚é–“</div>
  <div style="background:#f5f5f5; border:1px solid #ccc; border-radius:8px; padding:1rem; line-height:1.8;">
    â–¸ <strong>é€±ä¸€è‡³é€±äº”ï¼š</strong> ä¸‹åˆ3é» ~ æ™šä¸Š7é»<br />
    â–¸ <strong>é€±å…­ã€é€±æ—¥ï¼š</strong> ä¸‹åˆ2é»30åˆ† ~ æ™šä¸Š7é»<br />
    <span style="margin-left: 1.5em; color: #666;">â€» è‹¥ææ—©å”®å®Œæœƒæå‰æ”¶æ”¤å”· ğŸ¾</span>
  </div>

  <!-- æ”¾åœ¨æ¡†å¤– -->
  <div style="margin-top: 0.5rem; font-size: 0.95rem;">
    â€» <strong>æœ€æ—©å¯å–é¤æ™‚é–“ï¼š</strong> å¹³æ—¥ 15:10ã€é€±æœ« 14:40ï¼ˆå› éœ€ç¾å ´çƒ˜çƒ¤æº–å‚™ â˜•ï¼‰
  </div>
  
  <div class="section-title">ğŸ“ ç‡Ÿæ¥­åœ°é»</div>
    <div style="padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px; background: #f5f5f5;">
    å½°åŒ–ç¸£æºªæ¹–é®è¥¿ç’°è·¯241è™Ÿ
  </div>

  <div class="section-title">ğŸ“… æœ¬æœˆåº—ä¼‘æ—¥</div>
  <ul style="background:#fff8f0; border:1px solid #ddd; border-radius:8px; padding:1rem; list-style:none; line-height:1.8;">
    <li>2025/06/10ï¼ˆäºŒï¼‰</li>
    <li>2025/06/17ï¼ˆäºŒï¼‰</li>
    <li>2025/06/27ï¼ˆäº”ï¼‰</li>
  </ul>
  <div style="margin-top:0.5rem; font-size:0.95rem; color:#444;">
    â€» å¤å­£æœŸé–“ï¼Œ<strong>è‹¥é‡é¢±é¢¨æˆ–å¤©æ°£ä¸ä½³</strong>ï¼Œå¯èƒ½è‡¨æ™‚åº—ä¼‘ ğŸŒ€è«‹ç•™æ„ <strong>LINE é»é¤ç³»çµ±å…¬å‘Š</strong> æˆ– <strong>IG é™æ™‚å‹•æ…‹</strong> æœ€æ–°é€šçŸ¥ ğŸ™
  </div>


  <div class="section-title">â³ æœŸé–“é™å®šå£å‘³</div>
  <div style="background:#fff0f5; border:1px solid #ddd; border-radius:8px; padding:1rem; line-height:1.8; color:#444;">
  ğŸ« <strong>è‰è“å¯å¯æ—¥é™å®š</strong><br>
  â–¸ æ¿ƒæƒ…å·§å…‹åŠ› $38<br>
  â–¸ ç¾©ç¾è‰è“æœç²’ $35<br>
  â–¸ ç…‰ä¹³è‰è“æœç²’ $38<br>
  ä»Šå¤©çš„ç©ºæ°£ç”œç”œçš„ï¼Œä¾†ä¸€ä»½ã€Œè“å¥½å°é»å¿ƒã€ï¼Œå‰›å‰›å¥½ ğŸ“
  </div>

  

  <div class="section-title">ğŸ£ å“é …</div>
  <div id="productList"></div>

  <div class="summary" id="summary">ç¸½é‡‘é¡ï¼š$0ï½œç¸½é¡†æ•¸ï¼š0</div>

  <div class="section-title">âœï¸ å…¶ä»–è³‡è¨Š</div>
  <label>ç¨±è¬‚</label>
  <input type="text" id="customerName" placeholder="ä¾‹å¦‚ï¼šå°èŠ±ã€å¼µå°å§" />

  <label>é›»è©±è™Ÿç¢¼</label>
  <input type="tel" id="phone" required />

  <label>å–é¤æ—¥æœŸ</label>
  <input type="date" id="pickupDate" />

  <label>å–é¤æ™‚é–“</label>
  <select id="pickupTime"></select>

  <!-- å‚™è¨»å€ -->
  <label for="note">å‚™è¨»</label>
  <textarea id="note" rows="3" placeholder="ä¾‹å¦‚ï¼šè›‹å…¨ç†Ÿã€è›‹åŠç†Ÿç­‰..."></textarea>

  <!-- æ“ä½œæç¤ºèˆ‡æŒ‰éˆ•å€ -->
  <div style="margin-top: 1rem; color:#666; font-size: 0.9rem;">
    â¬‡ï¸ é»æ“Šä¸‹æ–¹æŒ‰éˆ•ç”¢ç”Ÿè¨‚å–®ï¼Œå†è¤‡è£½æ–‡å­—è²¼çµ¦æˆ‘å€‘ â˜ºï¸
  </div>

  <!-- ç”¢ç”Ÿè¨‚å–® -->
  <button class="submit-btn" onclick="generateOrder()">ğŸ§¾ ç”¢ç”Ÿè¨‚å–®æ–‡å­—</button>

  <!-- é¡¯ç¤ºè¨‚å–®æ–‡å­— -->
  <div id="resultBox" style="display:none; margin-top: 1rem;"></div>

  <!-- è¤‡è£½æŒ‰éˆ• -->
  <button class="submit-btn" onclick="copyToClipboard()" style="margin-top:10px; display:none;" id="copyBtn">ğŸ“‹ è¤‡è£½è¨‚å–®æ–‡å­—</button>


  <script>
    const products = [
      { name: "ç¶“å…¸è›‹ç‡’", price: 33 },
      { name: "èµ·å¸è›‹ç‡’", price: 40 },
      { name: "é›™é‡èµ·å¸", price: 30 },
      { name: "æ¿ƒéƒå¡å£«é”", price: 25 },
      { name: "æ³•å¼å¥¶é…¥", price: 35 },
      { name: "èµ·å¸å¥¶é…¥", price: 35 },
      { name: "é»‘ç³–éº»ç³¬", price: 33 },
      { name: "æ—¥å¼ç´…è±†æ³¥", price: 30 },
      { name: "æ—¥å¼ç´…è±†éº»ç³¬", price: 35 },
      { name: "å¤æ—©å‘³é›è›‹ç³•", price: 18 },
      { name: "æ¿ƒæƒ…å·§å…‹åŠ›", price: 38 },
      { name: "ç¾©ç¾è‰è“æœç²’", price: 35 },
      { name: "ç…‰ä¹³è‰è“æœç²’", price: 38 },
      { name: "ç’°ä¿æè¢‹", price: 2 }
    ];

    const holidays = ['2025-06-04', '2025-06-10', '2025-06-13','2025-06-17', '2025-06-27' ];
    const state = {};

    function renderProducts() {
      const productListEl = document.getElementById('productList');
      products.forEach((item, idx) => {
        state[item.name] = 0;
        const div = document.createElement('div');
        div.className = 'product';
        div.innerHTML = `
          <div class="name">${item.name} - $${item.price}</div>
          <div class="counter">
            <button onclick="changeQty('${item.name}', -1)">-</button>
            <span id="qty-${idx}">0</span>
            <button onclick="changeQty('${item.name}', 1)">+</button>
          </div>
        `;
        productListEl.appendChild(div);
      });
    }

    function changeQty(name, diff) {
      state[name] = Math.max(0, state[name] + diff);
      const idx = products.findIndex(p => p.name === name);
      document.getElementById(`qty-${idx}`).innerText = state[name];
      updateSummary();
    }

    function updateSummary() {
      let total = 0, count = 0;
      for (let item of products) {
        total += state[item.name] * item.price;
        if (item.name !== 'ç’°ä¿æè¢‹') count += state[item.name];
      }
      document.getElementById('summary').innerText = `ç¸½é‡‘é¡ï¼š$${total}ï½œç¸½é¡†æ•¸ï¼š${count}`;
    }

    function generateTimeSlots() {
      const select = document.getElementById('pickupTime');
      select.innerHTML = ''; // æ¸…ç©ºèˆŠé¸é …

      const dateInput = document.getElementById('pickupDate');
      const selectedDate = new Date(dateInput.value);
      const day = selectedDate.getDay(); // 0=æ—¥, 6=å…­

      let startHour = 15;
      let startMinute = 10;

      // å¦‚æœæ˜¯é€±å…­æˆ–é€±æ—¥ï¼Œå‰‡æ”¹ç‚º14:40é–‹å§‹
      if (day === 0 || day === 6) {
        startHour = 14;
        startMinute = 40;
      }

      for (let h = startHour; h < 19; h++) {
        for (let m = 0; m < 60; m += 10) {
          if (h === startHour && m < startMinute) continue;
          const hour = h.toString().padStart(2, '0');
          const min = m.toString().padStart(2, '0');
          const timeStr = `${hour}:${min}`;
          const opt = document.createElement('option');
          opt.value = timeStr;
          opt.textContent = timeStr;
          select.appendChild(opt);
        }
      }
    }



    function disableHolidayDates() {
      const dateInput = document.getElementById('pickupDate');
      dateInput.addEventListener('change', () => {
        if (holidays.includes(dateInput.value)) {
          alert('æ­¤æ—¥ç‚ºå…¬ä¼‘æ—¥ï¼Œè«‹é¸æ“‡å…¶ä»–æ—¥æœŸ');
          dateInput.value = '';
        }
      });
    }

    
    function generateOrder() {
      const name = document.getElementById('customerName').value || "é¡§å®¢";
      const phone = document.getElementById('phone').value;
      const date = document.getElementById('pickupDate').value;
      const time = document.getElementById('pickupTime').value;
      const note = document.getElementById('note').value;

      let total = 0, count = 0;
      for (let item of products) {
        total += state[item.name] * item.price;
        if (item.name !== 'ç’°ä¿æè¢‹') count += state[item.name];
      }

      let orderText = `ã€èŠ±ç”°èˆå°åˆ¤ç‡’ é è¨‚å–®ã€‘
ç¨±è¬‚ï¼š${name}
é›»è©±ï¼š${phone}
å–é¤æ™‚é–“ï¼š${date} ${time}
ç¸½é‡‘é¡ï¼š$${total}
ç¸½é¡†æ•¸ï¼š${count}
è¨‚è³¼å…§å®¹ï¼š`;
      for (let item of products) {
        if (state[item.name] > 0) {
          orderText += `
- ${item.name} x${state[item.name]}`;
        }
      }
      if (note) orderText += `
å‚™è¨»ï¼š${note}`;

      // âœ… æœ€å¾Œè£œä¸Šæé†’èªå¥
      orderText += `\nâ— æœ‰æ”¶åˆ°åº—å®¶å›è¦†æ‰ä»£è¡¨è¨‚é¤æˆåŠŸå–”ï¼`;


      document.getElementById('resultBox').style.display = 'block';
      document.getElementById('copyBtn').style.display = 'block';
      document.getElementById('resultBox').innerText = orderText;
    }


    function copyToClipboard() {
      const result = document.getElementById('resultBox').innerText;
      navigator.clipboard.writeText(result).then(() => {
        alert('å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼Œè«‹è²¼åˆ° LINE å‚³é€çµ¦åº—å®¶ï¼æœ‰æ”¶åˆ°åº—å®¶å›è¦†æ‰ä»£è¡¨è¨‚é¤æˆåŠŸå–”ï¼');
      });
    }

    window.onload = () => {
      renderProducts();
      generateTimeSlots();
      disableHolidayDates();
      document.getElementById('pickupDate').addEventListener('change', generateTimeSlots);
    };
  </script>

  <script>
    // âœ… æ¯æ¬¡é–‹å•Ÿéƒ½åŠ ä¸Šç‰ˆæœ¬åƒæ•¸ï¼Œé¿å…å¿«å–
    (function () {
      const url = new URL(window.location.href);
      const timestamp = Date.now().toString();

      // å¦‚æœç¶²å€é‚„æ²’åŠ  v åƒæ•¸å°±åŠ 
      if (!url.searchParams.has('v')) {
        url.searchParams.set('v', timestamp);
        window.location.replace(url.href);
      }
    })();
  </script>


</body>
</html>
